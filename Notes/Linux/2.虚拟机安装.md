### 用VMware安装虚拟机

VMware 软件

Workstation 10 就可以，太新的版本主要在云计算上，没必要

CentOS 官网下载 DVD 镜像

新建虚拟机-稍后安装操作系统-Linux CentOS 64位

虚拟机硬件调整

CentOS 至少要1GB 安装最小内存。太小会开启简易安装。

虚拟机网络设置

<table>
    <thead>
        <tr>
            <td>连接方式</td>
            <td>连接网卡</td>
            <td>能否连接本机</td>
            <td>能否连接公网</td>
            <td>能否连接局域网</td>
        </tr>
    </thead>
    <tbody>
      <tr>
          <td>桥接</td>
          <td>本地真实网卡</td>
          <td>可以</td>
          <td>可以</td>
          <td>可以</td>
        </tr>
        <tr>
            <td>NAT</td>
            <td>VMnet8</td>
            <td>可以</td>
            <td>可以</td>
            <td>不能</td>
        </tr>
        <tr>
            <td>仅主机</td>
            <td>VMnet1</td>
            <td>可以</td>
            <td>不能</td>
            <td>不能</td>
        </tr>
    </tbody>
</table>


### 分区

 把一块物理硬盘分成许多逻辑硬盘，物理上：客观存在的一块完整硬盘，逻辑上：主观上这一块硬盘被分成许多

不同的区域。

#### 分区表形式

所有操作系统的分区表相同

MBR分区表（主引导记录分区表）：最大支持2.1T硬盘总和，每块硬盘最多支持4个分区。

GPT分区表（全局唯一标识分区表）：GPT支持9.4ZB，理论上分区数无限制，但Windows限制128个主分区。

#### 分区类型

对MBR才讨论分区类型，对GPT讨论分区类型无意义

主分区：最多只能有4个，操作系统只能安装在其上。

拓展分区：

- 最多只有1个

- 主分区+拓展分区最多只有4个

- 不能写入数据，只能包含逻辑分区

逻辑分区：

最少可以分10+个

### 格式化

格式化是指根据文件系统（Windows 如 FAT16，FAT32，NTFS，Linux 如 EXT2，EXT3，EXT4，XFS）在分区中划分一片用于存放文件分配表、目录表等用于文件管理的磁盘空间，即为了写入文件系统。<b>文件系统越新，支持越大的分区，越大的单个文件，越快的读取速度，越安全。</b>

EXT文件系统格式化过程简化版：

每个分区分成两部分，小部分存放索引，大部分存放数据。小的一部分中存放128B的INode，包含：INode号，各种时间，权限，保存位置。大的一部分分成许多等大小的数据块，在Linux默认4KB，可选1KB和2KB。存储数据过程中，系统会尽量将数据块连续存放在一起。每个数据块中剩余的空闲部分不能再储存其他数据。数据块是数据存储的最小单位。<b>所有文件大小和文件占用空间大小的数值是有差别的。</b>

### 硬件设备文件名

/dev/hda1（IDE接口硬盘），已淘汰

/dev/sda1（SCSI、SATA接口硬盘），目前主流

/dev/sdb2 第二块SATA接口硬盘的第2个主分区（1-4只能分配给主分区和扩展分区）

/dev/sdc5 第三块SATA接口硬盘的第1个逻辑分区（逻辑分区一定从5开始）

挂载点：使用已经存在的空目录作为挂载点

Windows使用字母ABCD…作为盘符

挂载：

必须分区

- / 根分区，用户可以写入数据
- swap分区（即虚拟内存），给内核用，用户无法写入数据
    - 如果真实内存小于4GB，swap是内存的两倍
    - 如果真实内存大于4GB，swap和内存一致
    - 实验环境，不大于2GB

- /boot（启动分区，1GB），留给系统用

常用分区

/home 用于文件服务器

/www 用于Web服务器

### 安装过程

安装时候会报错，我是微星主板，在BIOS-高级设置-OC-CPU特征-SVM Mode 改为True，即可开启虚拟化技术。

1. 安装语言：中文，若只安装英语，中文内容会乱码
2. 时间日期：中国-上海
3. root账户密码
4. 分区选择自定义分区，标准分区
5. 选择最小化安装

建议修改主机名，默认为localhost.localdomain

<strong>服务器密码三原则：</strong>

- 复杂性
    - 大于8位
    - 大写、小写、数字和符号最少包含三种
    - 不允许个人身份和信息相关的内容
    - 不允许使用现有的英文单词
- 易记性
- 时效性：180天换一次

配置虚拟机IP

setup 开启配置工具

ifconfig 查看网卡状态

service network restart 重启网络服务

如果选择桥接模式，虚拟机与主机拥有不同的IP地址，但在同一网段内。除了IP地址不能一样，虚拟机网络配置和主机一样。缺点是主机IP地址一变，虚拟机的IP地址也要更改。如果使用学校内的校园网，那么虚拟机无法访问外网，但是可以访问主机。

选择NAT模式，可以固定虚拟机IP地址，网关和子网掩码可在网络设置里查看。











