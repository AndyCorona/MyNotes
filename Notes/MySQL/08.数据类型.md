# 第八章 数据类型

在 MySQL 中常见的数据类型包括数值型、字符型、日期型和二进制型。

### 一、数值型
#### （一）整型
| 类型          | 字节                  | 范围（有符号）                      | 范围（无符号）    |
| ------------- | --------------------- | ----------------------------------- | ----------------- |
| BIT           |                       |                                     | 1 - 64 bit        |
| TINYINT       | 1                     | -128 ~ 127                          | 0 ~ 255           |
| SMALLINT      | 2                     | -32768 ~ 32767                      | 0 ~ 65535         |
| MEDIUNINT     | 3                     | -2<sup>23</sup> ~ 2<sup>23</sup> -1 | 2<sup>24</sup> -1 |
| INT / INTEGER | 4                     | -2<sup>31</sup> ~ 2<sup>31</sup> -1 | 2<sup>32</sup> -1 |
| BIGINT        | 8                     | -2<sup>63</sup> ~ 2<sup>63</sup> -1 | 2<sup>64</sup> -1 |
| BOOLEAN       | 布尔标志，取值 0 或 1 |                                     |                   |

- 默认为有符号，无符号用 **UNSIGNED**。
```sql
CREATE TABLE table1 (
	t1 INT (2), 
	t2 INT UNSIGNED);
```
- 若插入的数据超过整型范围，会报 out of range异常，并插入**最大允许的值(临界值)**。
- 若不设置数据长度，则会有**默认长度**。

数据类型与数据长度的功能易混淆：

**数据类型**决定了能存放的**数据的范围**，如无符号 ```tinyint```决定了能够存放 0 ~ 255 范围内的整型数字。

**数据长度**决定了能**显示的数据的长度**，可搭配 ZEROFILL 使用。如无符号 ```tinyint(2) ZEROFILL```中的 2 决定了若显示的结果长度小于2，左边用 0 填充；大于2，不做改变。能够存放的数据范围仍然由 ```tinyint ``` 决定，为 0 ~ 255。

- ZEROFILL 只能与无符号整型搭配使用。

#### （二）小数

 浮点型
| 类型        | 字节 |
| ----------- | ---- |
| FLOAT(M,D)  | 4    |
| DOUBLE(M,D) | 8    |
| REAL        | 4    |

 定点型
 ```sql
 DEC(M,D) 或 DECIMAL(M,D)
 ```
其中，
M 代表整数位数+小数位数
D 代表小数位数
      
- 若插入的数据**整数部分**超过 M - D 的限制，则插入临界值（即允许的最大值，如(M,D) = (3,2)时，临界值为 9.99）
  若插入的数据小数部分超多 D 位数，则四舍五入至 D 位小数
  若插入的数据小数部分不足 D 位数，则补 0 至 D 位小数
- M 和 D可省略。省略后，对于定点数 ```DEMICAL```，M 默认为 10，D默认为 0
对于浮点数 ```FLOAT```和 ```DOUBLE```，随着插入值的变化而变化

### 二、字符型

MySQL处理定长列远比处理变长列快得多，且 MySQL 不允许对变长列（或一个列的可变部分）进行索引。

| 类型       | 范围                     | 特点         |
| ---------- | ------------------------ | ------------ |
| CHAR       | 1 ~ 255 个字符           | 定长字符串   |
| VARCHAR    | 0 ~ 255 个字符           | 变长字符串   |
| TINYTEXT   | 0 - 255 字节的文本       | 变长文本     |
| MEDIUMTEXT | 0 - 16 K 的文本          | 变长文本     |
| TEXT       | 0 - 64 K 的文本          | 变长文本     |
| LONGTEXT   | 0 - 4GB 的文本           | 变长文本     |
| ENUM       | 预定义字符串中的其中一个 | 预定义字符串 |
| SET        | 预定义字符串中的任意个   | 预定义字符串 |

- ``BINARY(M) / VARBINARY(M)``与 ```CHAR(M) / VARCHAR(M)```类似，区别在于前者只储存二进制字符。

案例、
 ```sql
CREATE TABLE human (gender ENUM ('male', 'female'));
 ```
```gender```列一次只能填入一个 enum 中的值（ ```male```或 ```female```）
 ```sql
CREATE TABLE human (pets SET ('cat', 'dog'));
 ```
```pets``` 列一次可以插入任意个 set 集合中的值（```dog```,```cat```或```dog和cat```）

### 三、日期型

| 类型      | 字节数 | 最小值              | 最大值              |
| --------- | ------ | ------------------- | ------------------- |
| DATE      | 4      | 1000-01-01          | 9999-12-31          |
| TIME      | 3      | -838:59:59          | 838:59:59           |
| YEAR      | 1      | 1901                | 2155                |
| DATETIME  | 8      | 1000-01-01 00:00:00 | 9999-12-31 23:59:59 |
| TIMESTAMP | 4      | 19700101080001      | 2038年的某个时刻    |

```DATETIME```不受时区影响，```TIMESTAMP```受时区影响，对于跨时区选择```TIMESTAMP```。

### 四、二进制型

二进制数据类型可存储任何数据，包括图像、多媒体文件等等。

| 类型       | 最大范围 |
| ---------- | -------- |
| TINYBLOB   | 255 字节 |
| BLOB       | 64 KB    |
| MEDIUMBLOB | 16 MB    |
| LONGBLOB   | 4 GB     |